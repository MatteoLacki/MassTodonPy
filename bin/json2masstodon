#!/usr/bin/env python

# -*- coding: utf-8 -*-
#   Copyright (C) 2016 Mateusz Krzysztof Łącki and Michał Startek.
#
#   This file is part of MassTodon.
#
#   MassTodon is free software: you can redistribute it and/or modify
#   it under the terms of the GNU AFFERO GENERAL PUBLIC LICENSE
#   Version 3.
#
#   MassTodon is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
#
#   You should have received a copy of the GNU AFFERO GENERAL PUBLIC LICENSE
#   Version 3 along with MassTodon.  If not, see
#   <https://www.gnu.org/licenses/agpl-3.0.en.html>.

import argparse

from MassTodonPy.MassTodon import MassTodon
from MassTodonPy.CLI.AdditionalParsers import add_max_times_parsing
from MassTodonPy.CLI.AdditionalParsers import add_output_parsing
from MassTodonPy.CLI.AdditionalParsers import add_spectra_plots_parsing
from MassTodonPy.CLI.AdditionalParsers import add_verbosity_parsing
from MassTodonPy.CLI.MassTodon_wrapper import run_masstodon
from MassTodonPy.CLI.JsonParser import parse_json

# Parsing call
parser = argparse.ArgumentParser()
parser.add_argument("json",
                    help="Path to json with arguments",
                    type=parse_json)
add_output_parsing(parser)
add_spectra_plots_parsing(parser)
add_verbosity_parsing(parser)
add_max_times_parsing(parser)

args = parser.parse_args().__dict__ # parsing & making a dictionary
args.update(args.pop('json'))
run_masstodon(args)
