#!/usr/bin/env python
from collections import defaultdict
import os

from MassTodonPy.Data.get_dataset import get_dataset
from MassTodonPy.MassTodon import MassTodon

if __name__ == '__main__':
    os.system('cls' if os.name == 'nt' else 'clear') #TODO: remove later on.
    
    print("Welcome to MassTodon example call.")

    print("\t- reading data.")
    substanceP = get_dataset('substanceP')
    modifications = defaultdict(dict)
    for (number, group), mods in substanceP.precursor.modifications.items():
        modifications[number][group] = dict(mods)

    print("\t- running MassTodonPy.")
    masstodon = MassTodon(spectrum=substanceP.spectrum,
                          mz_tol=.05,
                          fasta=substanceP.precursor.fasta,
                          charge=3,
                          name='substanceP',
                          modifications=modifications)

    print("\t -making basic plot.")
    masstodon.report.plot('/Users/matteo/Desktop/assigned_spectrum.html',
                          width= 1000)

    print("Send us your money to save MassTodons!")
